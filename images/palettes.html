<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Palette Filter</title>
    <link rel="stylesheet" href="https://unpkg.com/isotope-layout@3.0.6/dist/isotope.pkgd.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"> <!-- Font Awesome -->
    <link rel="stylesheet" href="css/palettes.css">

</head>
<body>
    <div class="container">
        <div class="filterbox">
            <!-- Filter by Color -->
            <div class="filter-group">
                <b>Color <span class="arrow">▼</span></b> 
                <ul class="filter" id="color-filters">
                    <li><a href="#" data-filter="*" class="selected">All</a></li>
                    <li><a href="#" data-filter=".red">Red <span class="color-swatch" style="background-color: red;"></span></a></li>
                    <li><a href="#" data-filter=".orange">Orange <span class="color-swatch" style="background-color: orange;"></span></a></li>
                    <li><a href="#" data-filter=".yellow">Yellow <span class="color-swatch" style="background-color: yellow;"></span></a></li>
                    <li><a href="#" data-filter=".green">Green <span class="color-swatch" style="background-color: green;"></span></a></li>
                    <li><a href="#" data-filter=".blue">Blue <span class="color-swatch" style="background-color: blue;"></span></a></li>
                    <li><a href="#" data-filter=".purple">Purple <span class="color-swatch" style="background-color: purple;"></span></a></li>
                    <li><a href="#" data-filter=".pink">Pink <span class="color-swatch" style="background-color: pink;"></span></a></li>
                    <li><a href="#" data-filter=".brown">Brown <span class="color-swatch" style="background-color: brown;"></span></a></li>
                    <li><a href="#" data-filter=".black">Black <span class="color-swatch" style="background-color: black;"></span></a></li>
                    <li><a href="#" data-filter=".white">White <span class="color-swatch" style="background-color: white; border: 1px solid #ddd;"></span></a></li>
                    <li><a href="#" data-filter=".grey">Grey <span class="color-swatch" style="background-color: gray;"></span></a></li>
                </ul>
            </div>

            <!-- Filter by Character -->
            <div class="filter-group">
                <b>Character <span class="arrow">▼</span></b>
                <ul class="filter" id="character-filters">
                    <li><a href="#" data-filter=".keito"><img src="img/keito_plush.png">Keito</a></li>
                    <li><a href="#" data-filter=".kuro"><img src="img/kuro_plush.png">Kuro</a></li>
                    <li><a href="#" data-filter=".souma"><img src="img/souma_plush.png">Souma</a></li>
                    <li><a href="#" data-filter=".tetora"><img src="img/tetora_plush.png">Tetora</a></li>
                    <li><a href="#" data-filter=".midori"><img src="img/midori_plush.png">Midori</a></li>
                    <li><a href="#" data-filter=".shinobu"><img src="img/shinobu_plush.png">Shinobu</a></li>
                    <li><a href="#" data-filter=".chiaki"><img src="img/chiaki_plush.png">Chiaki</a></li>
                    <li><a href="#" data-filter=".kanata"><img src="img/kanata_plush.png">Kanata</a></li>
                    <li><a href="#" data-filter=".ibuki"><img src="img/ibuki_plush.png">Ibuki</a></li>
                </ul>
            </div>

            <!-- Filter by Theme -->
            <div class="filter-group">
                <b>Theme <span class="arrow">▼</span></b>
                <ul class="filter" id="theme-filters">
                    <li><a href="#" data-filter=".chic"><i class="fas fa-martini-glass"></i> Chic</a></li>
                    <li><a href="#" data-filter=".refreshing"><i class="fas fa-leaf"></i> Refreshing</a></li>
                    <li><a href="#" data-filter=".tropical"><i class="fas fa-tree"></i> Tropical</a></li>
                    <li><a href="#" data-filter=".autumnal"><i class="fas fa-leaf"></i> Autumnal</a></li>
                    <li><a href="#" data-filter=".moody"><i class="fas fa-cloud-rain"></i> Moody</a></li>
                    <li><a href="#" data-filter=".warm"><i class="fas fa-mug-hot"></i> Warm</a></li>
                    <li><a href="#" data-filter=".muted"><i class="fas fa-mug-hot"></i> Muted</a></li>
                    <li><a href="#" data-filter=".vibrant"><i class="fas fa-palette"></i> Vibrant</a></li>
                    <li><a href="#" data-filter=".pastel"><i class="fas fa-palette"></i> Pastel</a></li>
                </ul>
            </div>
        </div>

        <div class="grid" id="palette-container"></div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/isotope-layout@3.0.6/dist/isotope.pkgd.min.js"></script>
    <script src="js/palettes.js"></script>
    <script>
        $(document).ready(function() {

            const paletteContainer = $("#palette-container");

            // Manually add the palettes to the container
            palettes.forEach((palette) => {
    const paletteDiv = $("<div>").addClass("palette").addClass(palette.tags.join(" "));

    // Add Name
    const title = $("<p>").html(`<b>${palette.name}</b>`);
    paletteDiv.append(title);

    // Add Character Name (Italicized)
    const character = $("<p>").addClass("character-name").html(`<i>${palette.character}</i>`); // Adjust for each palette's character if needed
    paletteDiv.append(character);

    // Loop through the colors
    palette.colors.forEach((color) => {
        const colorBlock = $("<span>").addClass("block").css("background-color", color);
        const hexCode = $("<div>").addClass("hexcode").text(color);
        colorBlock.append(hexCode);
        paletteDiv.append(colorBlock);

        // Click to copy hex code
        colorBlock.on("click", function() {
            const hex = $(this).find(".hexcode").text();
            navigator.clipboard.writeText(hex).then(() => {
                alert(`Copied ${hex} to clipboard!`);
            }).catch(err => {
                console.error('Failed to copy: ', err);
            });
        });
    });

    paletteContainer.append(paletteDiv);
});

            // Initialize Isotope
            const $grid = $(".grid").isotope({
                itemSelector: ".palette",
                layoutMode: "fitRows"
            });

            // Click event to handle greying out other palettes
            $(".palette").on("click", function() {
            if ($(this).hasClass("selected")) {
                // If already selected, remove grey effect from all palettes
                $(".palette").removeClass("greyed-out selected");
            } else {
                // Otherwise, grey out all palettes and highlight only this one
                $(".palette").addClass("greyed-out").removeClass("selected");
                $(this).removeClass("greyed-out").addClass("selected");
            }
        });          

            // Filter functionality
            $(".filterbox").on("click", "a", function(e) {
                e.preventDefault();
                const filterValue = $(this).attr("data-filter");
                $grid.isotope({ filter: filterValue });
                $(".filterbox a").removeClass("selected");
                $(this).addClass("selected");
            });
        });

        $(document).ready(function() {
            $('.filter-group b').click(function() {
                $(this).next('.filter').slideToggle();
                $(this).parent().toggleClass('collapsed');
            });
        });
    </script>
</body>
</html>
